{"ast":null,"code":"import _slicedToArray from\"/home/divyanshu/nodejs/instagram/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,createContext,useReducer,useContext}from'react';import NavBar from'./components/Navbar';import\"./App.css\";import{BrowserRouter,Route,Switch,useHistory}from'react-router-dom';import Home from'./components/screens/Home';import Signin from'./components/screens/SignIn';import Profile from'./components/screens/Profile';import Signup from'./components/screens/Signup';import CreatePost from'./components/screens/CreatePost';import{reducer,initialState}from'./reducers/userReducer';import UserProfile from'./components/screens/UserProfile';import SubscribedUserPosts from'./components/screens/SubscribesUserPosts';import Reset from'./components/screens/Reset';import NewPassword from'./components/screens/Newpassword';export var UserContext=createContext();var Routing=function Routing(){var history=useHistory();var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;useEffect(function(){var user=localStorage.getItem(\"user\");if(user){dispatch({type:\"USER\",payload:user});}else{if(!history.location.pathname.startsWith('/reset'))history.push('/signin');}},[]);return/*#__PURE__*/React.createElement(Switch,null,/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/\"},/*#__PURE__*/React.createElement(Home,null)),/*#__PURE__*/React.createElement(Route,{path:\"/signin\"},/*#__PURE__*/React.createElement(Signin,null)),/*#__PURE__*/React.createElement(Route,{path:\"/signup\"},/*#__PURE__*/React.createElement(Signup,null)),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/profile\"},/*#__PURE__*/React.createElement(Profile,null)),/*#__PURE__*/React.createElement(Route,{path:\"/create\"},/*#__PURE__*/React.createElement(CreatePost,null)),/*#__PURE__*/React.createElement(Route,{path:\"/profile/:userid\"},/*#__PURE__*/React.createElement(UserProfile,null)),/*#__PURE__*/React.createElement(Route,{path:\"/myfollowingpost\"},/*#__PURE__*/React.createElement(SubscribedUserPosts,null)),/*#__PURE__*/React.createElement(Route,{exact:true,path:\"/reset\"},/*#__PURE__*/React.createElement(Reset,null)),/*#__PURE__*/React.createElement(Route,{path:\"/reset/:token\"},/*#__PURE__*/React.createElement(NewPassword,null)));};function App(){var _useReducer=useReducer(reducer,initialState),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];return/*#__PURE__*/React.createElement(UserContext.Provider,{value:{state:state,dispatch:dispatch}},/*#__PURE__*/React.createElement(BrowserRouter,null,/*#__PURE__*/React.createElement(NavBar,null),/*#__PURE__*/React.createElement(Routing,null)));}export default App;","map":{"version":3,"sources":["/home/divyanshu/nodejs/instagram/server/client/src/App.js"],"names":["React","useEffect","createContext","useReducer","useContext","NavBar","BrowserRouter","Route","Switch","useHistory","Home","Signin","Profile","Signup","CreatePost","reducer","initialState","UserProfile","SubscribedUserPosts","Reset","NewPassword","UserContext","Routing","history","state","dispatch","user","localStorage","getItem","type","payload","location","pathname","startsWith","push","App"],"mappings":"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","sourcesContent":["import React,{useEffect,createContext,useReducer,useContext} from 'react';\nimport NavBar from './components/Navbar'\nimport \"./App.css\"\nimport {BrowserRouter,Route,Switch,useHistory} from 'react-router-dom'\nimport Home from './components/screens/Home'\nimport Signin from './components/screens/SignIn'\nimport Profile from './components/screens/Profile'\nimport Signup from './components/screens/Signup'\nimport CreatePost from './components/screens/CreatePost'\nimport {reducer,initialState} from './reducers/userReducer'\nimport UserProfile from './components/screens/UserProfile'\nimport SubscribedUserPosts from './components/screens/SubscribesUserPosts'\nimport Reset from './components/screens/Reset'\nimport NewPassword from './components/screens/Newpassword'\nexport const UserContext = createContext()\n\n\nconst Routing = ()=>{\n  const history = useHistory()\n  const {state,dispatch} = useContext(UserContext)\n  useEffect(()=>{\n    const user = localStorage.getItem(\"user\")\n    if(user){\n      dispatch({type:\"USER\",payload:user})\n    }else{\n      if(!history.location.pathname.startsWith('/reset'))\n           history.push('/signin')\n    }\n  },[])\n  return(\n    <Switch>\n      <Route exact path=\"/\" >\n      <Home />\n      </Route>\n      <Route path=\"/signin\">\n        <Signin />\n      </Route>\n      <Route path=\"/signup\">\n        <Signup />\n      </Route>\n      <Route exact path=\"/profile\">\n        <Profile />\n      </Route>\n      <Route path=\"/create\">\n        <CreatePost/>\n      </Route>\n      <Route path=\"/profile/:userid\">\n        <UserProfile />\n      </Route>\n      <Route path=\"/myfollowingpost\">\n        <SubscribedUserPosts />\n      </Route>\n      <Route exact path=\"/reset\">\n        <Reset/>\n      </Route>\n      <Route path=\"/reset/:token\">\n        <NewPassword />\n      </Route>\n      \n    </Switch>\n  )\n}\n\nfunction App() {\n  const [state,dispatch] = useReducer(reducer,initialState)\n  return (\n    <UserContext.Provider value={{state,dispatch}}>\n    <BrowserRouter>\n      <NavBar />\n      <Routing />\n      \n    </BrowserRouter>\n    </UserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}
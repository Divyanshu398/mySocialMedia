{"ast":null,"code":"import _slicedToArray from\"/home/divyanshu/nodejs/instagram/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link,useHistory}from'react-router-dom';import M from'materialize-css';var SignIn=function SignIn(){var history=useHistory();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPasword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),image=_useState8[0],setImage=_useState8[1];var _useState9=useState(undefined),_useState10=_slicedToArray(_useState9,2),url=_useState10[0],setUrl=_useState10[1];useEffect(function(){if(url){uploadFields();}},[url]);var uploadPic=function uploadPic(){var data=new FormData();data.append(\"file\",image);data.append(\"upload_preset\",\"insta-clone\");data.append(\"cloud_name\",\"dkinsta\");fetch(\"https://api.cloudinary.com/v1_1/dkinsta/image/upload\",{method:\"post\",body:data}).then(function(res){return res.json();}).then(function(data){setUrl(data.url);}).catch(function(err){console.log(err);});};var uploadFields=function uploadFields(){if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){M.toast({html:\"invalid email\",classes:\"#c62828 red darken-3\"});return;}fetch(\"/signup\",{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({name:name,password:password,email:email,pic:url})}).then(function(res){return res.json();}).then(function(data){if(data.error){M.toast({html:data.error,classes:\"#c62828 red darken-3\"});}else{M.toast({html:data.message,classes:\"#43a047 green darken-1\"});history.push('/signin');}}).catch(function(err){console.log(err);});};var PostData=function PostData(){if(image){uploadPic();}else{uploadFields();}};return/*#__PURE__*/React.createElement(\"div\",{className:\"mycard\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card auth-card input-field\"},/*#__PURE__*/React.createElement(\"h2\",null,\"Instagram\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}}),/*#__PURE__*/React.createElement(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(e){return setPasword(e.target.value);}}),/*#__PURE__*/React.createElement(\"div\",{className:\"file-field input-field\"},/*#__PURE__*/React.createElement(\"div\",{className:\"btn #64b5f6 blue darken-1\"},/*#__PURE__*/React.createElement(\"span\",null,\"Upload pic\"),/*#__PURE__*/React.createElement(\"input\",{type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}})),/*#__PURE__*/React.createElement(\"div\",{className:\"file-path-wrapper\"},/*#__PURE__*/React.createElement(\"input\",{className:\"file-path validate\",type:\"text\"}))),/*#__PURE__*/React.createElement(\"button\",{className:\"btn waves-effect waves-light #64b5f6 blue darken-1\",onClick:function onClick(){return PostData();}},\"SignUP\"),/*#__PURE__*/React.createElement(\"h5\",null,/*#__PURE__*/React.createElement(Link,{to:\"/signin\"},\"Already have an account ?\"))));};export default SignIn;","map":{"version":3,"sources":["/home/divyanshu/nodejs/instagram/server/client/src/components/screens/Signup.js"],"names":["React","useState","useEffect","Link","useHistory","M","SignIn","history","name","setName","password","setPasword","email","setEmail","image","setImage","undefined","url","setUrl","uploadFields","uploadPic","data","FormData","append","fetch","method","body","then","res","json","catch","err","console","log","test","toast","html","classes","headers","JSON","stringify","pic","error","message","push","PostData","e","target","value","files"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react'\nimport {Link,useHistory} from 'react-router-dom'\nimport M from 'materialize-css'\nconst SignIn  = ()=>{\n    const history = useHistory()\n    const [name,setName] = useState(\"\")\n    const [password,setPasword] = useState(\"\")\n    const [email,setEmail] = useState(\"\")\n    const [image,setImage] = useState(\"\")\n    const [url,setUrl] = useState(undefined)\n    useEffect(()=>{\n        if(url){\n            uploadFields()\n        }\n    },[url])\n    const uploadPic = ()=>{\n        const data = new FormData()\n        data.append(\"file\",image)\n        data.append(\"upload_preset\",\"insta-clone\")\n        data.append(\"cloud_name\",\"dkinsta\")\n        fetch(\"https://api.cloudinary.com/v1_1/dkinsta/image/upload\",{\n            method:\"post\",\n            body:data\n        })\n        .then(res=>res.json())\n        .then(data=>{\n           setUrl(data.url)\n        })\n        .catch(err=>{\n            console.log(err)\n        })\n    }\n    const uploadFields = ()=>{\n        if(!/^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/.test(email)){\n            M.toast({html: \"invalid email\",classes:\"#c62828 red darken-3\"})\n            return\n        }\n        fetch(\"/signup\",{\n            method:\"post\",\n            headers:{\n                \"Content-Type\":\"application/json\"\n            },\n            body:JSON.stringify({\n                name,\n                password,\n                email,\n                pic:url\n            })\n        }).then(res=>res.json())\n        .then(data=>{\n           if(data.error){\n              M.toast({html: data.error,classes:\"#c62828 red darken-3\"})\n           }\n           else{\n               M.toast({html:data.message,classes:\"#43a047 green darken-1\"})\n               history.push('/signin')\n           }\n        }).catch(err=>{\n            console.log(err)\n        })\n    }\n    const PostData = ()=>{\n        if(image){\n            uploadPic()\n        }else{\n            uploadFields()\n        }\n       \n    }\n\n   return (\n      <div className=\"mycard\">\n          <div className=\"card auth-card input-field\">\n            <h2>Instagram</h2>\n            <input\n            type=\"text\"\n            placeholder=\"name\"\n            value={name}\n            onChange={(e)=>setName(e.target.value)}\n            />\n            <input\n            type=\"text\"\n            placeholder=\"email\"\n            value={email}\n            onChange={(e)=>setEmail(e.target.value)}\n            />\n            <input\n            type=\"password\"\n            placeholder=\"password\"\n            value={password}\n            onChange={(e)=>setPasword(e.target.value)}\n            />\n            <div className=\"file-field input-field\">\n            <div className=\"btn #64b5f6 blue darken-1\">\n                <span>Upload pic</span>\n                <input type=\"file\" onChange={(e)=>setImage(e.target.files[0])} />\n            </div>\n            <div className=\"file-path-wrapper\">\n                <input className=\"file-path validate\" type=\"text\" />\n            </div>\n            </div>\n            <button className=\"btn waves-effect waves-light #64b5f6 blue darken-1\"\n            onClick={()=>PostData()}\n            >\n                SignUP\n            </button>\n            <h5>\n                <Link to=\"/signin\">Already have an account ?</Link>\n            </h5>\n             \n               \n         \n            \n    \n        </div>\n      </div>\n   )\n}\n\n\nexport default SignIn"]},"metadata":{},"sourceType":"module"}
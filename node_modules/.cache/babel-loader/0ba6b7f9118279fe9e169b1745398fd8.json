{"ast":null,"code":"import _slicedToArray from\"/home/divyanshu/nodejs/instagram/server/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useRef,useEffect,useState}from'react';import{Link,useHistory}from'react-router-dom';import{UserContext}from'../App';import M from'materialize-css';var NavBar=function NavBar(){var searchModal=useRef(null);var _useState=useState(''),_useState2=_slicedToArray(_useState,2),search=_useState2[0],setSearch=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),userDetails=_useState4[0],setUserDetails=_useState4[1];var _useContext=useContext(UserContext),state=_useContext.state,dispatch=_useContext.dispatch;var history=useHistory();useEffect(function(){M.Modal.init(searchModal.current);},[]);var renderList=function renderList(){if(state){return[/*#__PURE__*/React.createElement(\"li\",{key:\"1\"},/*#__PURE__*/React.createElement(\"i\",{\"data-target\":\"modal1\",className:\"large material-icons modal-trigger\",style:{color:\"black\"}},\"search\")),/*#__PURE__*/React.createElement(\"li\",{key:\"2\"},/*#__PURE__*/React.createElement(Link,{to:\"/profile\"},\"Profile\")),/*#__PURE__*/React.createElement(\"li\",{key:\"3\"},/*#__PURE__*/React.createElement(Link,{to:\"/create\"},\"Create Post\")),/*#__PURE__*/React.createElement(\"li\",{key:\"4\"},/*#__PURE__*/React.createElement(Link,{to:\"/myfollowingpost\"},\"My following Posts\")),/*#__PURE__*/React.createElement(\"li\",{key:\"5\"},/*#__PURE__*/React.createElement(\"button\",{className:\"btn #c62828 red darken-3\",onClick:function onClick(){localStorage.clear();dispatch({type:\"CLEAR\"});history.push('/signin');}},\"Logout\"))];}else{return[/*#__PURE__*/React.createElement(\"li\",{key:\"6\"},/*#__PURE__*/React.createElement(Link,{to:\"/signin\"},\"Signin\")),/*#__PURE__*/React.createElement(\"li\",{key:\"7\"},/*#__PURE__*/React.createElement(Link,{to:\"/signup\"},\"Signup\"))];}};var fetchUsers=function fetchUsers(query){setSearch(query);fetch('/search-users',{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({query:query})}).then(function(res){return res.json();}).then(function(results){setUserDetails(results.user);});};return/*#__PURE__*/React.createElement(\"nav\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"nav-wrapper white\"},/*#__PURE__*/React.createElement(Link,{to:state?\"/\":\"/signin\",className:\"brand-logo left\"},\"Instagram\"),/*#__PURE__*/React.createElement(\"ul\",{id:\"nav-mobile\",className:\"right\"},renderList())),/*#__PURE__*/React.createElement(\"div\",{id:\"modal1\",class:\"modal\",ref:searchModal,style:{color:\"black\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",placeholder:\"search users\",value:search,onChange:function onChange(e){return fetchUsers(e.target.value);}}),/*#__PURE__*/React.createElement(\"ul\",{className:\"collection\"},userDetails.map(function(item){return/*#__PURE__*/React.createElement(Link,{to:item._id!==state._id?\"/profile/\"+item._id:'/profile',onClick:function onClick(){M.Modal.getInstance(searchModal.current).close();setSearch('');}},/*#__PURE__*/React.createElement(\"li\",{className:\"collection-item\"},item.email));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\"},/*#__PURE__*/React.createElement(\"button\",{className:\"modal-close waves-effect waves-green btn-flat\",onClick:function onClick(){return setSearch('');}},\"close\"))));};export default NavBar;","map":{"version":3,"sources":["/home/divyanshu/nodejs/instagram/server/client/src/components/Navbar.js"],"names":["React","useContext","useRef","useEffect","useState","Link","useHistory","UserContext","M","NavBar","searchModal","search","setSearch","userDetails","setUserDetails","state","dispatch","history","Modal","init","current","renderList","color","localStorage","clear","type","push","fetchUsers","query","fetch","method","headers","body","JSON","stringify","then","res","json","results","user","e","target","value","map","item","_id","getInstance","close","email"],"mappings":"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","sourcesContent":["import React,{useContext,useRef,useEffect,useState} from 'react'\nimport {Link ,useHistory} from 'react-router-dom'\nimport {UserContext} from '../App'\nimport M from 'materialize-css'\nconst NavBar = ()=>{\n    const  searchModal = useRef(null)\n    const [search,setSearch] = useState('')\n    const [userDetails,setUserDetails] = useState([])\n     const {state,dispatch} = useContext(UserContext)\n     const history = useHistory()\n     useEffect(()=>{\n         M.Modal.init(searchModal.current)\n     },[])\n     const renderList = ()=>{\n       if(state){\n           return [\n            <li key=\"1\"><i  data-target=\"modal1\" className=\"large material-icons modal-trigger\" style={{color:\"black\"}}>search</i></li>,\n            <li key=\"2\"><Link to=\"/profile\">Profile</Link></li>,\n            <li key=\"3\"><Link to=\"/create\">Create Post</Link></li>,\n            <li key=\"4\"><Link to=\"/myfollowingpost\">My following Posts</Link></li>,\n            <li  key=\"5\">\n             <button className=\"btn #c62828 red darken-3\"\n            onClick={()=>{\n              localStorage.clear()\n              dispatch({type:\"CLEAR\"})\n              history.push('/signin')\n            }}\n            >\n                Logout\n            </button>\n            </li>\n         \n            \n           ]\n       }else{\n         return [\n          <li  key=\"6\"><Link to=\"/signin\">Signin</Link></li>,\n          <li  key=\"7\"><Link to=\"/signup\">Signup</Link></li>\n         \n         ]\n       }\n     }\n\n\n     const fetchUsers = (query)=>{\n        setSearch(query)\n        fetch('/search-users',{\n          method:\"post\",\n          headers:{\n            \"Content-Type\":\"application/json\"\n          },\n          body:JSON.stringify({\n            query\n          })\n        }).then(res=>res.json())\n        .then(results=>{\n          setUserDetails(results.user)\n        })\n     }\n    return(\n        <nav>\n        <div className=\"nav-wrapper white\">\n          <Link to={state?\"/\":\"/signin\"} className=\"brand-logo left\">Instagram</Link>\n          <ul id=\"nav-mobile\" className=\"right\">\n             {renderList()}\n  \n          </ul>\n        </div>\n        <div id=\"modal1\" class=\"modal\" ref={searchModal} style={{color:\"black\"}}>\n          <div className=\"modal-content\">\n          <input\n            type=\"text\"\n            placeholder=\"search users\"\n            value={search}\n            onChange={(e)=>fetchUsers(e.target.value)}\n            />\n             <ul className=\"collection\">\n               {userDetails.map(item=>{\n                 return <Link to={item._id !== state._id ? \"/profile/\"+item._id:'/profile'} onClick={()=>{\n                   M.Modal.getInstance(searchModal.current).close()\n                   setSearch('')\n                 }}><li className=\"collection-item\">{item.email}</li></Link> \n               })}\n               \n              </ul>\n          </div>\n          <div className=\"modal-footer\">\n            <button className=\"modal-close waves-effect waves-green btn-flat\" onClick={()=>setSearch('')}>close</button>\n          </div>\n        </div>\n      </nav>\n    )\n}\n\n\nexport default NavBar"]},"metadata":{},"sourceType":"module"}